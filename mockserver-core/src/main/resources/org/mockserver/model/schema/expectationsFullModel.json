{
  "title": "expectation",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "httpRequest": {
      "$ref": "#/definitions/httpRequest"
    },
    "httpResponse": {
      "$ref": "#/definitions/httpResponse"
    },
    "httpForward": {
      "$ref": "#/definitions/httpForward"
    },
    "httpClassCallback": {
      "$ref": "#/definitions/httpClassCallback"
    },
    "httpObjectCallback": {
      "$ref": "#/definitions/httpObjectCallback"
    },
    "httpError": {
      "$ref": "#/definitions/httpError"
    },
    "times": {
      "$ref": "#/definitions/times"
    },
    "timeToLive": {
      "$ref": "#/definitions/timeToLive"
    }
  },
  "oneOf": [
    {
      "required": [
        "httpResponse"
      ]
    },
    {
      "required": [
        "httpForward"
      ]
    },
    {
      "required": [
        "httpClassCallback"
      ]
    },
    {
      "required": [
        "httpError"
      ]
    },
    {
      "required": [
        "httpObjectCallback"
      ]
    }
  ],
  "definitions": {
    "httpRequest": {
      "title": "request matcher",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "body": {
          "$ref": "#/definitions/body"
        },
        "headers": {
          "$ref": "#/definitions/keyToMultiValue"
        },
        "cookies": {
          "$ref": "#/definitions/keyToValue"
        },
        "queryStringParameters": {
          "$ref": "#/definitions/keyToMultiValue"
        },
        "path": {
          "type": "string"
        },
        "method": {
          "type": "string"
        },
        "secure": {
          "type": "boolean"
        }
      }
    },
    "httpResponse": {
      "title": "response to return",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "body": {
          "$ref": "#/definitions/bodyWithContentType"
        },
        "delay": {
          "$ref": "#/definitions/delay"
        },
        "cookies": {
          "$ref": "#/definitions/keyToValue"
        },
        "connectionOptions": {
          "$ref": "#/definitions/connectionOptions"
        },
        "headers": {
          "$ref": "#/definitions/keyToMultiValue"
        },
        "statusCode": {
          "type": "integer"
        }
      }
    },
    "httpForward": {
      "title": "host and port to forward to",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "host": {
          "type": "string"
        },
        "port": {
          "type": "integer"
        },
        "scheme": {
          "enum": [
            "HTTP",
            "HTTPS"
          ]
        }
      }
    },
    "httpClassCallback": {
      "title": "class callback",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "callbackClass": {
          "type": "string"
        }
      }
    },
    "httpObjectCallback": {
      "title": "object / method callback",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "clientId": {
          "type": "string"
        }
      }
    },
    "httpError": {
      "title": "error behaviour",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "delay": {
          "$ref": "#/definitions/delay"
        },
        "dropConnection": {
          "type": "boolean"
        },
        "responseBytes": {
          "type": "string"
        }
      }
    },
    "times": {
      "title": "number of responses",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "remainingTimes": {
          "type": "integer"
        },
        "unlimited": {
          "type": "boolean"
        }
      }
    },
    "timeToLive": {
      "title": "time expectation is valid for",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "timeUnit": {
          "enum": [
            "HOURS",
            "MINUTES",
            "SECONDS",
            "MILLISECONDS",
            "MICROSECONDS",
            "NANOSECONDS"
          ]
        },
        "timeToLive": {
          "type": "integer"
        },
        "unlimited": {
          "type": "boolean"
        }
      }
    },
    "body": {
      "title": "request body matcher",
      "oneOf": [
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "BINARY"
              ]
            },
            "value": {
              "type": "string"
            },
            "contentType": {
              "type": "string"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "JSON"
              ]
            },
            "json": {
              "type": "string"
            },
            "contentType": {
              "type": "string"
            },
            "matchType": {
              "enum": [
                "STRICT",
                "ONLY_MATCHING_FIELDS"
              ]
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "JSON_SCHEMA"
              ]
            },
            "jsonSchema": {
              "type": "string"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "PARAMETERS"
              ]
            },
            "parameters": {
              "$ref": "#/definitions/keyToMultiValue"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "REGEX"
              ]
            },
            "regex": {
              "type": "string"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "STRING"
              ]
            },
            "string": {
              "type": "string"
            },
            "contentType": {
              "type": "string"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "XML"
              ]
            },
            "xml": {
              "type": "string"
            },
            "contentType": {
              "type": "string"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "XML_SCHEMA"
              ]
            },
            "xmlSchema": {
              "type": "string"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "XPATH"
              ]
            },
            "xpath": {
              "type": "string"
            }
          }
        },
        {
          "type": "string"
        }
      ]
    },
    "bodyWithContentType": {
      "title": "response body",
      "oneOf": [
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "BINARY"
              ]
            },
            "value": {
              "type": "string"
            },
            "contentType": {
              "type": "string"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "JSON"
              ]
            },
            "json": {
              "type": "string"
            },
            "contentType": {
              "type": "string"
            },
            "matchType": {
              "enum": [
                "STRICT",
                "ONLY_MATCHING_FIELDS"
              ]
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "PARAMETERS"
              ]
            },
            "parameters": {
              "$ref": "#/definitions/keyToMultiValue"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "STRING"
              ]
            },
            "string": {
              "type": "string"
            },
            "contentType": {
              "type": "string"
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "not": {
              "type": "boolean"
            },
            "type": {
              "enum": [
                "XML"
              ]
            },
            "xml": {
              "type": "string"
            },
            "contentType": {
              "type": "string"
            }
          }
        },
        {
          "type": "string"
        }
      ]
    },
    "delay": {
      "title": "response delay",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "timeUnit": {
          "type": "string"
        },
        "value": {
          "type": "integer"
        }
      }
    },
    "connectionOptions": {
      "title": "connection options",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "closeSocket": {
          "type": "boolean"
        },
        "contentLengthHeaderOverride": {
          "type": "integer"
        },
        "suppressContentLengthHeader": {
          "type": "boolean"
        },
        "suppressConnectionHeader": {
          "type": "boolean"
        },
        "keepAliveOverride": {
          "type": "boolean"
        }
      }
    },
    "keyToMultiValue": {
      "type": "array",
      "additionalProperties": false,
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "values": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "keyToValue": {
      "type": "array",
      "additionalProperties": false,
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "value": {
            "type": "string"
          }
        }
      }
    }
  }
}